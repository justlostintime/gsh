sub UpdateVarNames()  ' updates all var names to new standards
'' In old versions of gsh internal variables included the $ names
'' names have been standardized to remove the need for the $ at
'' the start of variable names internally
'' This function renames all variables in the image to the new standardized
'' it is called by update once to convert the names
  with sharedmem
    for each s as string in sharedmem
      print "Checking";; s
      if s = "$" then
        print "Renaming";;s ;;"to";;right(s,-1)
        try .rename(s,right(s,-1))
        if error then 
           print "Replacing existing";;right(s,-1);;"With Contents of";;s
           .[right(s,-1)] = .[s]
           try .free(s)
           if error then
              print "Warning Removal of";;s;;"failed!"
           endif
        endif
      endif
    next
  end with
end